/****************************************Copyright (c)****************************************************
**                       		 	CJS <greyorbit@foxmail.com>
**                                    COPYRIGHT (C) 2014-2018
**                                SPDX-License-Identifier: LGPL-2.1+
**--------------File Info---------------------------------------------------------------------------------
** File name:               modbus_porting.c
** Last modified Date:      2014-01-14
** Last Version:            1.0.0
** Descriptions:            
**							
**--------------------------------------------------------------------------------------------------------
** Created by:              CJS
** Created date:            2014-01-14
** Version:                 1.0.0
** Descriptions:            
**							
**--------------------------------------------------------------------------------------------------------
** Modified by:             
** Modified date:           
** Version:                 
** Descriptions:            
**
*********************************************************************************************************/
#include "modbus_typedef.h"
#include "modbus.h"
#include "modbus_porting.h"
#include "usart.h"
#include "sys_tick.h"

/*********************************************************************************************************
** Function name:           Modbus_GetRecCount    
** Descriptions:             
** input parameters:        
** output parameters:       
** Returned value:          
** Created by:              CJS
** Created Date:            2014-01-14
**--------------------------------------------------------------------------------------------------------
** Modified by:
** Modified date:
**--------------------------------------------------------------------------------------------------------
*********************************************************************************************************/
uint32_t Modbus_GetRecCount(mb_port_t n)
{
	return Usart_Get_Rec_Count(n);
}

/*********************************************************************************************************
** Function name:           Modbus_ClearRecCount    
** Descriptions:             
** input parameters:        
** output parameters:       
** Returned value:          
** Created by:              CJS
** Created Date:            2014-01-14
**--------------------------------------------------------------------------------------------------------
** Modified by:
** Modified date:
**--------------------------------------------------------------------------------------------------------
*********************************************************************************************************/
void Modbus_ClearRecCount(mb_port_t n)
{
	Usart_ClearRecCount(n);
}

/*********************************************************************************************************
** Function name:           Modbus_GetRecBuf    
** Descriptions:             
** input parameters:        
** output parameters:       
** Returned value:          
** Created by:              CJS
** Created Date:            2014-01-14
**--------------------------------------------------------------------------------------------------------
** Modified by:
** Modified date:
**--------------------------------------------------------------------------------------------------------
*********************************************************************************************************/
uint8_t* Modbus_GetRecBuf(mb_port_t n)
{
	return Usart_GetRecBuf(n);
}

/*********************************************************************************************************
** Function name:           Modbus_SendBytes 
** Descriptions:             
** input parameters:        
** output parameters:       
** Returned value:          
** Created by:              CJS
** Created Date:            2014-01-14
**--------------------------------------------------------------------------------------------------------
** Modified by:
** Modified date:
**--------------------------------------------------------------------------------------------------------
*********************************************************************************************************/
void Modbus_SendBytes(mb_port_t n, uint8_t *buf, uint32_t num)
{
	Usart_SendBytes(n, buf, num);
}

/*********************************************************************************************************
** Function name:           Modbus_GetTime
** Descriptions:           	 
** input parameters:       
** output parameters:       
** Returned value:          
** Created by:              CJS
** Created Date:            2014-02-25
**--------------------------------------------------------------------------------------------------------
** Modified by:
** Modified date:
**--------------------------------------------------------------------------------------------------------
*********************************************************************************************************/
mb_time_t Modbus_GetTime(void)
{
	mb_time_t* p_time = (mb_time_t*)System_GetTick();
	mb_time_t time;
    time.ms = p_time->ms;
	time.us = p_time->us;
	return time;
}
